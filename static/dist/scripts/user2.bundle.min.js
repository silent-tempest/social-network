(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

var ARRAY = [ 60, 60, 24, 7, 365 / 12 / 7, 12 ];

module.exports = function format ( date, locale ) {
  var diff = ( date - new Date().getTime() ) / 1000;
  var i, j;

  if ( diff <= 0 ) {
    diff = - diff;
    j = 0;
  } else {
    j = 1;
  }

  for ( i = 0; i < ARRAY.length && diff >= ARRAY[ i ]; ++i ) {
    diff /= ARRAY[ i ];
  }

  diff = Math.floor( diff );

  i *= 2;

  if ( diff > 1 ) {
    ++i;
  }

  return locale( diff, i )[ j ].replace( '%s', diff );
};

},{}],2:[function(require,module,exports){
'use strict';

/**
 * @param {number} value
 * @param {number} index
 * @returns {string[2]}
 */
function locale ( value, index ) {
  switch ( index ) {
    case 0:
      return [ 'только что', 'прямо сейчас' ];
    case 6:
      return [ 'вчера', 'завтра' ];
  }

  return format( Math.floor( 0.5 * index ), value );
}

var formats = [
  [ 'секунду', 'секунды',  'секунд' ],
  [  'минуту',  'минуты',   'минут' ],
  [     'час',    'часа',   'часов' ],
  [    'день',     'дня',    'дней' ],
  [  'неделю',  'недели',  'недель' ],
  [   'месяц',  'месяца', 'месяцев' ],
  [     'год',    'года',     'лет' ]
];

/**
 * @param {number} kind
 * @param {number} value
 * @returns {string[2]}
 */
function format ( kind, value ) {
  var format = formats[ kind ];
  var i, x;

  if ( value === 1 ) {
    return [ format[ 0 ] + ' назад', 'через ' + format[ 0 ] ];
  }

  if ( value > 20 ) {
    x = value % 10;
  } else {
    x = value;
  }

  if ( x === 1 ) {
    i = 0;
  } else if ( x >= 2 && x < 5 ) {
    i = 1;
  } else {
    i = 2;
  }

  return [ '%s ' + format[ i ] + ' назад', 'через %s ' + format[ i ] ];
}

module.exports = locale;

},{}],3:[function(require,module,exports){
'use strict';

if ( top !== self ) {
  top.location = self.location;
}

var format = require( 'super-timeago' );
var locale = require( 'super-timeago/locales/ru' );

var UI = {
  init: function init () {
    var self = this;

    setInterval( function () {
      self.update();
    }, 1000 );
  },

  update: function update () {
    var i, activity;

    for ( i = this.activities.length - 1; i >= 0; --i ) {
      if ( ( activity = this.activities[ i ].getAttribute( 'data-activity' ) ) ) {
        this.activities[ i ].innerHTML = format( new Date( activity ), locale );
      }
    }
  },

  activities: document.getElementsByClassName( 'activity' )
};

UI.init();

},{"super-timeago":1,"super-timeago/locales/ru":2}]},{},[3]);
